(function(e){function t(t){for(var r,o,l=t[0],c=t[1],s=t[2],f=0,p=[];f<l.length;f++)o=l[f],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&p.push(i[o][0]),i[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(p.length)p.shift()();return a.push.apply(a,s||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,l=1;l<n.length;l++){var c=n[l];0!==i[c]&&(r=!1)}r&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},i={app:0},a=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var s=0;s<l.length;s++)t(l[s]);var u=c;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var r=n("85ec"),i=n.n(r);i.a},"06de":function(e,t,n){},1:function(e,t){},10:function(e,t){},11:function(e,t){},12:function(e,t){},13:function(e,t){},14:function(e,t){},15:function(e,t){},16:function(e,t){},17:function(e,t){},2:function(e,t){},3:function(e,t){},4:function(e,t){},"4ac9":function(e,t){csdID="e4de7ce1615cc5a73",apiKey="AIzaSyCzL4PuUgQgQ3gQPwg4Rn1VmDoIla0sTFo",myHerokuUrl="https://agile-lowlands-97370.herokuapp.com/"},5:function(e,t){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",{attrs:{id:"nav"}}),n("router-view")],1)},a=[],o=(n("034f"),n("2877")),l={},c=Object(o["a"])(l,i,a,!1,null,null,null),s=c.exports,u=n("8c4f"),f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("h1",[e._v("구글 서치엔진에서 이미지 가져오기")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.keyWord,expression:"keyWord"}],staticStyle:{width:"25%","font-size":"25px"},attrs:{placeholder:"검색할 키워드를 입력하세요."},domProps:{value:e.keyWord},on:{input:function(t){t.target.composing||(e.keyWord=t.target.value)}}}),n("image-list",{attrs:{keyWord:e.keyWord}})],1)},p=[],m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"hello"},[n("div",[n("h3",[e._v("입력한 키워드 : "+e._s(e.keyWord))])]),n("br"),e._m(0),n("br"),n("div",[n("button",{on:{click:e.getImageList}},[e._v("GET 이미지 크롤링!!")])]),n("h3",{staticStyle:{"text-align":"left"},attrs:{id:"imgTitle"}}),e._m(1)])},d=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"myProgress"}},[n("span",{staticStyle:{color:"white","font-family":"auto"},attrs:{id:"mySpan"}}),n("div",{attrs:{id:"myBar"}},[e._v("0%")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("ul",{staticStyle:{"text-align":"left"},attrs:{id:"imageList1"}})])}],g=(n("a4d3"),n("e01a"),n("0d03"),n("a9e3"),n("b680"),n("d3b7"),n("acd8"),n("ac1f"),n("25f0"),n("3ca3"),n("5319"),n("841c"),n("ddb0"),n("130f"),n("4795"),n("2b3d"),n("5530")),h=(n("96cf"),n("1da1")),v=(n("4ac9"),n("7260")),y=n("0b16"),b=(n("30dc"),n("1157")),w=(n("3e8f"),n("bc3a"),n("c4e3")),S=n("0083"),k=new v(csdID,apiKey);window.setImmediate=window.setTimeout;var L={name:"ImageList",props:{keyWord:String},mounted:function(){var e=document.createElement("script");e.setAttribute("src","https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/1.3.8/FileSaver.js"),document.head.appendChild(e)},data:function(){return{tempImgList:[],imgList:[],pageStVal:1,pageEndVal:201,localWidth:"",clickOnce:!1,valCnt:0}},methods:{getImageList:function(){if(window.vueComponent=this,self=window.vueComponent,""!=this.keyWord)if(b("#imgTitle").text("수집된 URL"),this.clickOnce)alert("크롤링 중입니다. 잠시만 기달려주세요.");else{this.imgList=[],this.pageStVal=1,this.pageEndVal=201,b("#imageList1").empty(),self.localWidth="";var e=document.getElementById("myBar");e.style.width="0%",e.innerHTML="0%",self.searchFunc()}else alert("키워드를 입력하세요.")},searchFunc:function(){self.clickOnce=!0,document.getElementById("mySpan").textContent="현재 크롤링 진행률 : "+Math.floor(.5*this.pageStVal)+"% 입니다.",k.search(self.keyWord,{page:self.pageStVal,size:"large"}).then((function(e){for(var t=0;t<e.length;t++){var n=e[t];self.valCnt=t;var r=y.parse(n.url).pathname,i=r.replace(/[^a-zA-Z0-8\.]+/g,"_"),a=/\.(jpg|jpeg|png|gif)\b/;if(i.length<200&&a.test(i)){b("#imageList1").append("<li>"+n.url+"</li>");var o={imgUrl:n.url,imgDescription:n.description};self.tempImgList.push(o)}}self.compareTwoVal()}))["catch"]((function(e){self.compareTwoVal()}))},compareTwoVal:function(){self.pageStVal<self.pageEndVal?(self.pageStVal+=10,self.searchFunc(self.pageStVal,self.pageEndVal)):this.fetchSomeThing(0)},fetchSomeThing:function(e){if(null!=self.tempImgList[e]){var t=self.tempImgList[e],n=self.tempImgList;this.getBase64FromUrl(t.imgUrl,t.imgDescription).then((function(t){e++,e==n.length-1?self.make_zip():self.fetchSomeThing(e)})),"100"!=self.localWidth&&self.progressBar(e)}},make_zip:function(){var e=new w;if(0==self.imgList.length&&setTimeout((function(){return self.make_zip()}),500),self.imgList.length>0){for(var t=0;t<self.imgList.length;t++)e.file(self.imgList[t].description,this.urlToPromise(self.imgList[t].url),{binary:!0});e.generateAsync({type:"blob"}).then((function(e){saveAs(e,self.keyWord+".zip")}),(function(e){}));var n=document.getElementById("myBar");n.style.width="100%",n.innerHTML="100%",document.getElementById("mySpan").textContent="이미지 파일로 변환완료",self.clickOnce=!1}},fetchWithTimeout:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a,o,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=n.timeout,i=void 0===r?5e3:r,a=new AbortController,o=setTimeout((function(){return a.abort()}),i),e.next=5,fetch(t,Object(g["a"])(Object(g["a"])({},n),{},{signal:a.signal}));case 5:return l=e.sent,clearTimeout(o),e.abrupt("return",l);case 8:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),getBase64FromUrl:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=myHerokuUrl+t,e.prev=1,e.next=4,self.fetchWithTimeout(i,{timeout:3e3});case 4:return a=e.sent,e.next=7,a.blob();case 7:return o=e.sent,e.abrupt("return",new Promise((function(e){var t=window.URL.createObjectURL(new Blob([o])),r=document.createElement("a");r.href=t,r.setAttribute("download",n+".jpg"),document.body.appendChild(r);var i={url:t,description:n+".jpg"};e(self.imgList.push(i))})));case 11:return e.prev=11,e.t0=e["catch"](1),e.abrupt("return",r);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));function t(t,n){return e.apply(this,arguments)}return t}(),urlToPromise:function(e){return new Promise((function(t,n){S.getBinaryContent(e,(function(e,r){e?n(e):t(r)}))}))},progressBar:function(e){var t=document.getElementById("myBar");self.localWidth=parseFloat(100/self.tempImgList.length).toFixed(1).toString();var n=parseFloat(Number(self.localWidth)*Number(e)).toFixed(1);n>=100?(t.style.width="100%",t.innerHTML="100%",document.getElementById("mySpan").textContent="이미지 파일로 변환완료"):(t.style.width=n+"%",t.innerHTML=n+"%",document.getElementById("mySpan").textContent="이미지 파일로 변환 중: "+n+"% 입니다.")}}},_=L,x=(n("82e2"),Object(o["a"])(_,m,d,!1,null,"1698675f",null)),j=x.exports,T={components:{"image-list":j},data:function(){return{keyWord:""}}},O=T,I=Object(o["a"])(O,f,p,!1,null,null,null),E=I.exports;r["a"].use(u["a"]);var W=[{path:"/",name:"Home",component:E}],B=new u["a"]({base:"",routes:W}),C=B;r["a"].config.productionTip=!1,new r["a"]({router:C,render:function(e){return e(s)}}).$mount("#app")},6:function(e,t){},7:function(e,t){},8:function(e,t){},"82e2":function(e,t,n){"use strict";var r=n("06de"),i=n.n(r);i.a},"85ec":function(e,t,n){},9:function(e,t){}});
//# sourceMappingURL=app.e74b3b86.js.map